<!DOCTYPE html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>JavaEE Sample::EJB::Stateless</title><link rel="stylesheet" href="http://javaee-samples.github.io/stylesheets/foundation-icons.css"><link rel="stylesheet" href="http://javaee-samples.github.io/stylesheets/app.css"><script src="http://javaee-samples.github.io/javascripts/vendor/custom.modernizr.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script><link rel="author" type="text/plain" href="http://javaee-samples.github.io/humans.txt"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Stateless"></head><body class="antialiased"><nav class="top-bar"><ul class="title-area"><li class="name"><h1><a href="http://javaee-samples.github.io/">JavaEE Samples</a></h1></li><li class="toggle-topbar"><a href="#"><i class="fi-home"></i></a></li></ul><section class="top-bar-section"><ul class="right"><li class="divider"><li><a href="http://javaee-samples.github.io/contributors">Contributors <i class="fi-torsos-male-female"></i></a></li></li></ul></section></nav><div class="container"><header><div class="row"><div class="large-10 columns"><h2>Stateless</h2></div><div class="large-2 columns"><div class="action right"><a class="button radius round success" data-reveal-id="run">Run <i class="fi-play"></i></a><div id="run" class="hide reveal-modal" data-reveal=""><a class="close-reveal-modal" href="./">How to run the sample <i class="fi-x"></i></a><hr class="clear">The source code for this sample can be found in the <a href="https://github.com/javaee-samples/javaee7-samples/tree/master/ejb/stateless/">javaee7-samples</a> <i class="fi-social-github"></i>GitHub repository. The first thing we need to do is to get the source by downloading the repository and then go into the samples folder:<pre class="highlight"><code>git clone git://github.com/javaee-samples/javaee7-samples.git<br/>cd javaee7-samples/ejb/stateless/</code></pre>Now we are ready to start testing. You can run all the tests in this sample by executing:<pre class="highlight"><code>mvn test</code></pre>Or you can run individual tests by executing one of the following:<pre class="highlight"><code>mvn test -Dtest=AccountSessionStatelessnessTestmvn test -Dtest=AccountSessionBeanWithInterfaceTestmvn test -Dtest=AccountSessionBeanTest</code></pre></hr></div></div></div></div><div class="row"><div class="large-10 columns"><h3></h3></div></div><div class="sub"><div class="row"><div class="large-10 columns specifications"><ul class="inline-list"><li>Specifications in use:</li><li><ul class="inline-list"></ul><li><a href="http://javaee-samples.github.io/#CDI" title="Context and Dependency Injection 1.1">CDI</a></li><li><a href="http://javaee-samples.github.io/#EJB" title="Enterprise JavaBeans 3.2">EJB</a></li><li><a href="http://javaee-samples.github.io/#Servlet" title="Java Servlet 3.1">Servlet</a></li></li></ul></div><div class="large-2 columns contributors"><ul class="inline-list"><li><img class="photo" title="Alexander Heusingfeld" src="http://gravatar.com/avatar/aba82ecdcf1e1534f2c579d124d8cd35?s=25"></li><li><img class="photo" title="Arun Gupta" src="http://gravatar.com/avatar/268f57c236bb50c0f6e12ac38adc9d81?s=25"></li><li><img class="photo" title="Rafał Roppel" src="http://gravatar.com/avatar/4e0f4e2278aaecc65991e2a13f0b4325?s=25"></li><li><img class="photo" title="Kuba Marchwicki" src="http://gravatar.com/avatar/b5405045448a182b8ee12236ec63d8b0?s=25"></li></ul></div></div></div><script type="text/javascript">//$(function() { activateGuideMenuControl() })</script></header><div class="row"><div class="large-12 columns"><div id="test"><div class="row"><div class="large-7 columns"><h4>AccountSessionStatelessnessTest</h4></div><div class="large-3 columns"><ul class="inline-list" style="margin-left:0em;"><li style="margin-left: 0.3em"><i class="fi-like" title="All tests pass on GlassFish 4.0" style="color: green"></i></li><li style="margin-left: 0.3em"><i class="fi-like" title="All tests pass on WildFly 8.0.0.Final" style="color: green"></i></li><li style="margin-left: 0.3em"><i class="fi-like" title="All tests pass on WildFly 8.1.0.Final" style="color: green"></i></li><li style="margin-left: 0.3em"><i class="fi-like" title="All tests pass on WildFly nightly" style="color: green"></i></li></ul></div><div class="large-2 columns"><a class="right" href="https://github.com/javaee-samples/javaee7-samples/edit/master/ejb/stateless/src/test/java/org/javaee7/ejb/stateless/AccountSessionStatelessnessTest.java"><i class="fi-page-edit"></i></a></div></div><div class="improve">Missing a description for the story. Add some javadoc to the TestClass. <a class="right button tiny round" href="https://github.com/javaee-samples/javaee7-samples/edit/master/ejb/stateless/src/test/java/org/javaee7/ejb/stateless/AccountSessionStatelessnessTest.java">Show me how! <i class="fi-page-edit"></i></a></div><div class="improve">Missing a description for the deployment. Add some javadoc to the @Deployment method. <a class="right button tiny round" href="https://github.com/javaee-samples/javaee7-samples/edit/master/ejb/stateless/src/test/java/org/javaee7/ejb/stateless/AccountSessionStatelessnessTest.java">Show me how! <i class="fi-page-edit"></i></a></div><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">@Deployment
public static Archive&lt;?&gt; deployment() {
	return ShrinkWrap.create(JavaArchive.class, "test.jar")
			.addClass(AccountSessionBean.class)
			.addAsManifestResource(EmptyAsset.INSTANCE, "beans.xml");
}</code></pre>
</div>
</div><div class="paragraph">
<p>JSR 318: Enterprise JavaBeans, Version 3.1
3.4.7.2 Session Object Identity / Stateless Session Beans</p>
</div>
<div class="paragraph">
<p>All business object references of the same interface type for the same
stateless session bean have the same object identity, which is assigned
by the container. All references to the no-interface view of the same
stateless session bean have the same object identity.</p>
</div><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">@Test
public void should_be_identical_beans() {
    assertThat("Expect same instances", account1, is(account2));
}</code></pre>
</div>
</div></div><div id="test"><div class="row"><div class="large-7 columns"><h4>AccountSessionBeanWithInterfaceTest</h4></div><div class="large-3 columns"><ul class="inline-list" style="margin-left:0em;"><li style="margin-left: 0.3em"><i class="fi-like" title="All tests pass on GlassFish 4.0" style="color: green"></i></li><li style="margin-left: 0.3em"><i class="fi-like" title="All tests pass on WildFly 8.0.0.Final" style="color: green"></i></li><li style="margin-left: 0.3em"><i class="fi-like" title="All tests pass on WildFly 8.1.0.Final" style="color: green"></i></li><li style="margin-left: 0.3em"><i class="fi-like" title="All tests pass on WildFly nightly" style="color: green"></i></li></ul></div><div class="large-2 columns"><a class="right" href="https://github.com/javaee-samples/javaee7-samples/edit/master/ejb/stateless/src/test/java/org/javaee7/ejb/stateless/AccountSessionBeanWithInterfaceTest.java"><i class="fi-page-edit"></i></a></div></div><div class="improve">Missing a description for the story. Add some javadoc to the TestClass. <a class="right button tiny round" href="https://github.com/javaee-samples/javaee7-samples/edit/master/ejb/stateless/src/test/java/org/javaee7/ejb/stateless/AccountSessionBeanWithInterfaceTest.java">Show me how! <i class="fi-page-edit"></i></a></div><div class="paragraph">
<p>Arquillian specific method for creating a file which can be deployed
while executing the test.</p>
</div><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">@Deployment
public static Archive&lt;?&gt; deployment() {
	return ShrinkWrap.create(JavaArchive.class)
			.addClass(AccountSessionBeanWithInterface.class)
			.addClass(Account.class)
			.addAsManifestResource(EmptyAsset.INSTANCE, "beans.xml");
}</code></pre>
</div>
</div><div class="paragraph">
<p>Test of withdraw method, of class AccountSessionBean.</p>
</div><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">@Test
public void shouldWithdrawGivenAmount() {
	// given
	final float amount = 5.0F;

	// when
	final String actual = sut.withdraw(amount);

	// then
	assertThat(actual, is(equalTo("Withdrawn: " + amount)));
}</code></pre>
</div>
</div><div class="paragraph">
<p>Test of deposit method, of class AccountSessionBean.</p>
</div><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">@Test
public void shouldDepositGivenAmount() {
	// given
	final float amount = 10.0F;

	// when
	final String actual = sut.deposit(amount);

	// then
	assertThat(actual, is(equalTo("Deposited: " + amount)));
}</code></pre>
</div>
</div></div><div id="test"><div class="row"><div class="large-7 columns"><h4>AccountSessionBeanTest</h4></div><div class="large-3 columns"><ul class="inline-list" style="margin-left:0em;"><li style="margin-left: 0.3em"><i class="fi-like" title="All tests pass on GlassFish 4.0" style="color: green"></i></li><li style="margin-left: 0.3em"><i class="fi-like" title="All tests pass on WildFly 8.0.0.Final" style="color: green"></i></li><li style="margin-left: 0.3em"><i class="fi-like" title="All tests pass on WildFly 8.1.0.Final" style="color: green"></i></li><li style="margin-left: 0.3em"><i class="fi-like" title="All tests pass on WildFly nightly" style="color: green"></i></li></ul></div><div class="large-2 columns"><a class="right" href="https://github.com/javaee-samples/javaee7-samples/edit/master/ejb/stateless/src/test/java/org/javaee7/ejb/stateless/AccountSessionBeanTest.java"><i class="fi-page-edit"></i></a></div></div><div class="improve">Missing a description for the story. Add some javadoc to the TestClass. <a class="right button tiny round" href="https://github.com/javaee-samples/javaee7-samples/edit/master/ejb/stateless/src/test/java/org/javaee7/ejb/stateless/AccountSessionBeanTest.java">Show me how! <i class="fi-page-edit"></i></a></div><div class="paragraph">
<p>Arquillian specific method for creating a file which can be deployed
while executing the test.</p>
</div><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">@Deployment
public static Archive&lt;?&gt; deployment() {
	return ShrinkWrap.create(JavaArchive.class)
			.addClass(AccountSessionBean.class)
			.addAsManifestResource(EmptyAsset.INSTANCE, "beans.xml");
}</code></pre>
</div>
</div><div class="paragraph">
<p>Test of withdraw method, of class AccountSessionBean.</p>
</div><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">@Test
public void shouldWithdrawGivenAmount() {
	// given
	final float amount = 5.0F;

	// when
	final String actual = sut.withdraw(amount);

	// then
	assertThat(actual, is(equalTo("Withdrawn: " + amount)));
}</code></pre>
</div>
</div><div class="paragraph">
<p>Test of deposit method, of class AccountSessionBean.</p>
</div><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">@Test
public void shouldDepositGivenAmount() {
	// given
	final float amount = 10.0F;

	// when
	final String actual = sut.deposit(amount);

	// then
	assertThat(actual, is(equalTo("Deposited: " + amount)));
}</code></pre>
</div>
</div></div><script type="text/javascript">$(function() {
  hljs.initHighlightingOnLoad();
})</script></div></div><div class="row"><div class="large-12 columns"><div class="large-6 columns"><h3>Share the Knowledge</h3>Find this sample useful? <a href="http://twitter.com/home/?status=Just%20read%20the%20%23JavaEE-Sample%20%22EJB::Stateless%22%20and%20learned%20something%20new!%20http://javaee-samples.github.io/sample/ejb-stateless/">Share on <i class="fi-social-twitter"></i></a><p>There's a lot more about JavaEE to cover. If you're ready to learn more, check out the <a href="http://javaee-samples.github.io/">other available samples</a>.</p></div><div class="large-6 columns"><h3>Help Improve</h3>Find a bug in the sample? Something missing? You can fix it by <a href="https://github.com/javaee-samples/javaee7-samples/tree/master/ejb/stateless//src/test/java">editing the source</a>, making the correction and sending a pull request. Or report the problem to the <a href="https://github.com/javaee-samples/javaee7-samples/issues">issue tracker</a></div></div></div><div class="row"><div class="large-12 columns changes"><h4>Recent Changelog</h4><ul><li><div>Mar 26, 2014: Fixing #205. removing spec not compliant assertions <em>by kubamarchwicki</em></div></li><li><div>Mar 25, 2014: Suggestion howto fix #205 <em>by Alexander Heusingfeld</em></div></li><li><div>Dec 09, 2013: Favouring injection over initialcontext for #75 ejb stateless and statefull tests <em>by kubamarchwicki</em></div></li><li><div>Dec 08, 2013: Test same stateless bean on every ctx lookup <em>by kubamarchwicki</em></div></li><li><div>Dec 08, 2013: Removing obsolete servlets and index.jsp files <em>by kubamarchwicki</em></div></li><li><div>Dec 02, 2013: Tests for ejb/stateless & ejb/stateful <em>by Rafał Roppel</em></div></li><li><div>Nov 08, 2013: Cocommenting the test for now until ejb injection is identified <em>by Arun Gupta</em></div></li><li><div>Nov 08, 2013: Cocommenting the test for now until ejb injection is identified <em>by Arun Gupta</em></div></li><li><div>Nov 07, 2013: Commenting arquillian dependencies till it is sorted out <em>by Arun Gupta</em></div></li><li><div>Nov 05, 2013: Changed the bean name to be more meaningful. also added some simple tests but still getting npe and needs further investigation <em>by Arun Gupta</em></div></li></ul></div></div><div id="improve" class="hide reveal-modal" data-reveal=""><a class="close-reveal-modal" href="./">How to help improve this sample <i class="fi-x"></i></a><hr class="clear">The source code for this sample can be found in the <a href="https://github.com/javaee-samples/javaee7-samples/tree/master/ejb/stateless/">javaee7-samples</a> <i class="fi-social-github"></i>GitHub repository. The first thing you need to do is to get the source by downloading the repository and then go into the samples folder:<pre class="highlight"><code>git clone git://github.com/javaee-samples/javaee7-samples.git<br/>cd javaee7-samples/ejb/stateless/</code></pre><p>Do the changes as you see fit and send a pull request!</p><p>Good Luck!</p></hr></div></div><footer style="max-width: 100%"><div class="row"><div class="large-6 columns" style="margin-bottom: .75em; margin-top: .75em"><ul class="unstyled"><li>&#169; Copyright 2013-2014 JavaEE Samples.</li><li><i class="fi-like"></i>&nbsp;Mixed with <a href="http://foundation.zurb.com/">Foundation</a>. Baked by <a href="http://awestruct.org">Awestruct</a>.</li><li><i class="fi-share"></i>&nbsp;Website and docs licensed under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.</li></ul></div></div></footer><script src="http://javaee-samples.github.io/javascripts/foundation/foundation.js"></script><script src="http://javaee-samples.github.io/javascripts/foundation/foundation.topbar.js"></script><script src="http://javaee-samples.github.io/javascripts/foundation/foundation.reveal.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/highlight.min.js"></script><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/styles/pojoaque.css"><script type="text/javascript">$(document).foundation()</script><script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount','UA-18727998-5']);
_gaq.push(['_trackPageview']);
(function() {
 var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
 ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
 var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>
</body>
<!DOCTYPE html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Navigate your way trough EE via Tests</title><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.css"><link rel="stylesheet" href="/stylesheets/foundation-icons.css"><link rel="stylesheet" href="/stylesheets/app.css"><script src="/javascripts/vendor/custom.modernizr.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script><link rel="author" type="text/plain" href="/humans.txt"></head><body class="antialiased"><nav class="top-bar"><ul class="title-area"><li class="name"><h1><a href="/">JavaEE Samples</a></h1></li><li class="toggle-topbar"><a href="#"><i class="fi-home"></i></a></li></ul><section class="top-bar-section"><ul class="right"><li class="divider"><li><a href="/contributors">Contributors</a></li></li></ul></section></nav><div class="container"><header><div class="row"><div class="large-8 columns"><h2>Stateless<small></small></h2></div><div class="large-2 columns"><div class="howto right"><a class="button radius round" data-reveal-id="run">Run <i class="fi-play"></i></a><div id="run" class="hide reveal-modal" data-reveal=""><a class="close-reveal-modal" href="./">How to run the sample <i class="fi-x"></i></a><hr class="clear">The source code for this sample can be found in the <a href="https://github.com/javaee-samples/javaee7-samples/tree/master/ejb/stateless/">javaee7-samples</a><i class="fi-social-github"></i>GitHub repository. The first thing we need to do is to get the source by downloading the repository and then go into the samples folder:<pre class="prettyprint"><code class="prettyprint">git clone git://github.com/javaee-samples/javaee7-samples.git<br/>cd javaee7-samples/ejb/stateless/</code></pre>Now we are ready to start testing. You can run all the tests in this sample by executing:<pre class="prettyprint"><code class="prettyprint">mvn test</code></pre>Or you can run individual tests by executing one of the following:<pre class="prettyprint"><code class="prettyprint">mvn test -Dtest=AccountSessionBeanTestmvn test -Dtest=AccountSessionStatelessnessTestmvn test -Dtest=AccountSessionBeanWithInterfaceTest</code></pre></hr></div></div></div></div><div class="sub"><div class="row"><div class="large-12 columns"><ul class="inline-list right"><li>Specifications in use</li><li><ul class="inline-list"></ul><li><a href="/#CDI">CDI</a></li><li><a href="/#EJB">EJB</a></li><li><a href="/#Servlet">Servlet</a></li></li></ul></div></div></div><script type="text/javascript">//$(function() { activateGuideMenuControl() })</script></header><div class="row"><div class="large-12 columns"><div id="test"><h4>AccountSessionBeanTest</h4><div class="improve">Missing a description for the story. Add some javadoc to the TestClass. <a class="right" data-reveal-id="improve">Show me how!</a></div>Arquillian specific method for creating a file which can be deployed
 while executing the test.<pre class="prettyprint"><code class="prettyprint">@Deployment
public static Archive<?> deployment() {
	return ShrinkWrap.create(JavaArchive.class)
			.addClass(AccountSessionBean.class)
			.addAsManifestResource(EmptyAsset.INSTANCE, "beans.xml");
}</code></pre>Test of withdraw method, of class AccountSessionBean.<pre class="prettyprint"><code class="prettyprint">@Test
public void shouldWithdrawGivenAmount() {
	// given
	final float amount = 5.0F;
	// when
	final String actual = sut.withdraw(amount);
	// then
	assertThat(actual, is(equalTo("Withdrawn: " + amount)));
}</code></pre>Test of deposit method, of class AccountSessionBean.<pre class="prettyprint"><code class="prettyprint">@Test
public void shouldDepositGivenAmount() {
	// given
	final float amount = 10.0F;
	// when
	final String actual = sut.deposit(amount);
	// then
	assertThat(actual, is(equalTo("Deposited: " + amount)));
}</code></pre></div><div id="test"><h4>AccountSessionStatelessnessTest</h4><div class="improve">Missing a description for the story. Add some javadoc to the TestClass. <a class="right" data-reveal-id="improve">Show me how!</a></div><div class="improve">Missing a description for the deployment. Add some javadoc to the @Deployment method. <a class="right" data-reveal-id="improve">Show me how!</a></div><pre class="prettyprint"><code class="prettyprint">@Deployment
public static Archive<?> deployment() {
	return ShrinkWrap.create(JavaArchive.class, "test.jar")
			.addClass(AccountSessionBean.class)
			.addAsManifestResource(EmptyAsset.INSTANCE, "beans.xml");
}</code></pre>JSR 318: Enterprise JavaBeans, Version 3.1
 3.4.7.2 Session Object Identity / Stateless Session Beans

 All business object references of the same interface type for the same
 stateless session bean have the same object identity, which is assigned
 by the container. All references to the no-interface view of the same
 stateless session bean have the same object identity.<pre class="prettyprint"><code class="prettyprint">@Test
nSequence(1)
blic void should_be_identical_beans() {
  assertThat("Expect same instances", account1, is(account2));
</code></pre><div class="improve">Missing a description for the test scenario. Add some javadoc to the @Test method. <a class="right" data-reveal-id="improve">Show me how!</a></div><pre class="prettyprint"><code class="prettyprint">@Test
nSequence(2)
c void should_deposit_amount_on_first_account() {
  assertThat(account1.getAmount(), is(equalTo(0f)));
  String actual = account1.deposit(deposit_amount);
  assertThat(actual, is(equalTo("Deposited: " + deposit_amount)));
  assertThat(account1.getAmount(), is(equalTo(deposit_amount)));
</code></pre><div class="improve">Missing a description for the test scenario. Add some javadoc to the @Test method. <a class="right" data-reveal-id="improve">Show me how!</a></div><pre class="prettyprint"><code class="prettyprint">@Test
nSequence(3)
c void should_contain_already_deposited_amount_on_second_account() {
  assertThat(account2.getAmount(), is(equalTo(deposit_amount)));
</code></pre></div><div id="test"><h4>AccountSessionBeanWithInterfaceTest</h4><div class="improve">Missing a description for the story. Add some javadoc to the TestClass. <a class="right" data-reveal-id="improve">Show me how!</a></div>Arquillian specific method for creating a file which can be deployed
 while executing the test.<pre class="prettyprint"><code class="prettyprint">@Deployment
public static Archive<?> deployment() {
	return ShrinkWrap.create(JavaArchive.class)
			.addClass(AccountSessionBeanWithInterface.class)
			.addClass(Account.class)
			.addAsManifestResource(EmptyAsset.INSTANCE, "beans.xml");
}</code></pre>Test of withdraw method, of class AccountSessionBean.<pre class="prettyprint"><code class="prettyprint">@Test
public void shouldWithdrawGivenAmount() {
	// given
	final float amount = 5.0F;
	// when
	final String actual = sut.withdraw(amount);
	// then
	assertThat(actual, is(equalTo("Withdrawn: " + amount)));
}</code></pre>Test of deposit method, of class AccountSessionBean.<pre class="prettyprint"><code class="prettyprint">@Test
public void shouldDepositGivenAmount() {
	// given
	final float amount = 10.0F;
	// when
	final String actual = sut.deposit(amount);
	// then
	assertThat(actual, is(equalTo("Deposited: " + amount)));
}</code></pre></div><script type="text/javascript">$(function() {
  prettyPrint();
})</script></div></div><div id="improve" class="hide reveal-modal" data-reveal=""><a class="close-reveal-modal" href="./">How to help improve this sample <i class="fi-x"></i></a><hr class="clear">The source code for this sample can be found in the <a href="https://github.com/javaee-samples/javaee7-samples/tree/master/ejb/stateless/">javaee7-samples</a><i class="fi-social-github"></i>GitHub repository. The first thing you need to do is to get the source by downloading the repository and then go into the samples folder:<pre class="prettyprint"><code class="prettyprint">git clone git://github.com/javaee-samples/javaee7-samples.git<br/>cd javaee7-samples/ejb/stateless/</code></pre><p>Do the changes as you see fit and send a pull request!</p><p>Good Luck!</p></hr></div></div><footer class="row" style="max-width: 100%"><div class="large-6 columns" style="margin-bottom: .75em; margin-top: .75em"><ul class="unstyled"><li>&#169; Copyright 2013-2014 JavaEE Samples.</li><li><i class="fi-like"></i>&nbsp;Mixed with <a href="http://twitter.github.com/bootstrap">Bootstrap</a>. Baked by <a href="|http://awestruct.org">Awestruct</a>.</li><li><i class="fi-share"></i>&nbsp;Website and docs licensed under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.</li><li>Code released under <a href="http://www.apache.org/licenses/LICENSE-2.0.html">Apache License, v2.0</a>.</li></ul></div></footer><script src="/javascripts/foundation/foundation.js"></script><script src="/javascripts/foundation/foundation.topbar.js"></script><script src="/javascripts/foundation/foundation.reveal.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.js"></script><script type="text/javascript">$(document).foundation()</script></body>